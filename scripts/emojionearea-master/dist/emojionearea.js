window="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},document=window.document||{},function(e,a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(a.jQuery)}(function(e){"use strict";var a=0,n={},t={},i=window.emojione,o=[];function r(e){i?e():o.push(e)}var s,c,l,m="data:image/gif;base64,R0lGODlhAQABAJH/AP///wAAAMDAwAAAACH5BAEAAAIALAAAAAABAAEAAAICVAEAOw==",_=[].slice,u="emojionearea",d=0,p="&#8203;";function h(a,t,i){var o=!0,r=1;if(t){t=t.toLowerCase();do{var s=1==r?"@"+t:t;n[a.id][s]&&n[a.id][s].length&&e.each(n[a.id][s],function(e,n){return o=!1!==n.apply(a,i||[])})}while(o&&r--)}return o}function g(a,n,i,o){o=o||function(a,n){return e(n.currentTarget)},e.each(i,function(r,s){r=e.isArray(i)?s:r,(t[a.id][s]||(t[a.id][s]=[])).push([n,r,o])})}function f(e,a,n){var t,o=i.imageType;t="svg"==o?i.imagePathSVG:i.imagePathPNG;var r="";n&&(r=n.substr(1,n.length-2).replace(/_/g," ").replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}));var s="";return a.uc_base&&d>4?(s=a.uc_base,a=a.uc_output.toUpperCase()):s=a,e=e.replace("{name}",n||"").replace("{friendlyName}",r).replace("{img}",t+(d<2?s.toUpperCase():s)+"."+o).replace("{uni}",a),e=n?e.replace("{alt}",i.shortnameToUnicode(n)):e.replace("{alt}",i.convert(a))}function w(e,a,n){return e.replace(/:?\+?[\w_\-]+:?/g,function(e){e=":"+e.replace(/:$/,"").replace(/^:/,"")+":";var t=i.emojioneList[e];return t?d>4?f(a,t,e):(d>3&&(t=t.unicode),f(a,t[t.length-1],e)):n?"":e})}function b(e){var a,n;if(window.getSelection){if((a=window.getSelection()).getRangeAt&&a.rangeCount){(n=a.getRangeAt(0)).deleteContents();var t=document.createElement("div");t.innerHTML=e;for(var i,o,r=document.createDocumentFragment();i=t.firstChild;)o=r.appendChild(i);n.insertNode(r),o&&((n=n.cloneRange()).setStartAfter(o),n.collapse(!0),a.removeAllRanges(),a.addRange(n))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(e)}function y(){return window.emojioneVersion||"3.1.2"}function v(e){return"object"==typeof e}function k(e){var a;return e.cacheBustParam?(a=e.cacheBustParam,v(e.jsEscapeMap)?"?v=1.2.4"===a?"2.0.0":"?v=2.0.1"===a?"2.1.0":"?v=2.1.1"===a?"2.1.1":"?v=2.1.2"===a?"2.1.2":"?v=2.1.3"===a?"2.1.3":"?v=2.1.4"===a?"2.1.4":"2.2.7":"1.5.2"):e.emojiVersion}function j(e){switch(e){case"1.5.2":return 0;case"2.0.0":return 1;case"2.1.0":case"2.1.1":return 2;case"2.1.2":return 3;case"2.1.3":case"2.1.4":case"2.2.7":return 4;case"3.0.1":case"3.0.2":case"3.0.3":case"3.0":return 5;case"3.1.0":case"3.1.1":case"3.1.2":case"3.1":default:return 6}}function C(){if(e.fn.emojioneArea&&e.fn.emojioneArea.defaults)return e.fn.emojioneArea.defaults;var a={attributes:{dir:"ltr",spellcheck:!1,autocomplete:"off",autocorrect:"off",autocapitalize:"off"},search:!1,placeholder:!0,emojiPlaceholder:"earth_africa",searchPlaceholder:"SEARCH",container:null,hideSource:!0,shortnames:!0,sprite:!0,pickerPosition:"top",filtersPosition:"top",searchPosition:"top",hidePickerOnBlur:!0,buttonTitle:"Use the TAB key to insert emoji faster",tones:!0,tonesStyle:"bullet",inline:null,saveEmojisAs:"unicode",shortcuts:!0,autocomplete:!0,autocompleteTones:!1,standalone:!1,useInternalCDN:!0,imageType:"png",recentEmojis:!0,textcomplete:{maxCount:15,placement:null}},n=j(i?k(i):y());return a.filters=n>4?{recent:{icon:"clock3",title:"",emoji:""},crops:{icon:"corn",title:"",emoji:"earth_africa green_apple apple pear tangerine lemon banana watermelon grapes strawberry melon cherries peach pineapple kiwi avocado tomato eggplant cucumber carrot corn hot_pepper potato sweet_potato chestnut peanuts honey_pot coconut"},animals:{icon:"cow2",title:"",emoji:"dog cat mouse hamster rabbit fox bear panda_face koala tiger lion_face cow pig pig_nose frog monkey_face see_no_evil hear_no_evil speak_no_evil monkey chicken penguin bird baby_chick hatching_chick hatched_chick duck eagle owl bat wolf boar horse unicorn bee bug butterfly snail shell beetle ant spider spider_web turtle snake lizard scorpion crab squid octopus shrimp tropical_fish fish blowfish dolphin shark whale whale2 crocodile leopard tiger2 water_buffalo ox cow2 deer dromedary_camel camel elephant rhino gorilla racehorse pig2 goat ram sheep dog2 poodle cat2 rooster turkey dove rabbit2 mouse2 rat chipmunk dragon giraffe zebra hedgehog sauropod t_rex cricket dragon_face feet cactus christmas_tree evergreen_tree deciduous_tree palm_tree seedling herb shamrock four_leaf_clover bamboo tanabata_tree leaves fallen_leaf maple_leaf mushroom ear_of_rice bouquet tulip rose wilted_rose sunflower blossom cherry_blossom hibiscus earth_africa full_moon waning_gibbous_moon last_quarter_moon waning_crescent_moon new_moon waxing_crescent_moon first_quarter_moon waxing_gibbous_moon new_moon_with_face full_moon_with_face sun_with_face first_quarter_moon_with_face last_quarter_moon_with_face crescent_moon dizzy star star2 sparkles zap fire boom comet sunny white_sun_small_cloud partly_sunny white_sun_cloud white_sun_rain_cloud rainbow cloud cloud_rain thunder_cloud_rain cloud_lightning cloud_snow snowman2 snowman snowflake wind_blowing_face dash cloud_tornado fog ocean droplet sweat_drops umbrella "},earth:{icon:"earth_africa",title:"",emoji:"earth_africa full_moon waning_gibbous_moon last_quarter_moon waning_crescent_moon new_moon waxing_crescent_moon first_quarter_moon waxing_gibbous_moon new_moon_with_face full_moon_with_face sun_with_face first_quarter_moon_with_face last_quarter_moon_with_face crescent_moon dizzy star star2 sparkles zap fire boom comet sunny white_sun_small_cloud partly_sunny white_sun_cloud white_sun_rain_cloud rainbow cloud cloud_rain thunder_cloud_rain cloud_lightning cloud_snow snowman2 snowman snowflake wind_blowing_face dash cloud_tornado fog ocean droplet sweat_drops umbrella "},humans:{icon:"neutral_face",title:"",emoji:"grinning smiley smile grin laughing sweat_smile joy rofl relaxed blush innocent slight_smile upside_down wink relieved crazy_face star_struck heart_eyes kissing_heart kissing kissing_smiling_eyes kissing_closed_eyes yum stuck_out_tongue_winking_eye stuck_out_tongue_closed_eyes stuck_out_tongue money_mouth hugging nerd sunglasses cowboy smirk unamused disappointed pensive worried face_with_raised_eyebrow face_with_monocle confused slight_frown frowning2 persevere confounded tired_face weary triumph angry rage face_with_symbols_over_mouth no_mouth neutral_face expressionless hushed frowning anguished open_mouth astonished dizzy_face exploding_head flushed scream fearful cold_sweat cry disappointed_relieved drooling_face sob sweat sleepy sleeping rolling_eyes thinking shushing_face face_with_hand_over_mouth lying_face grimacing zipper_mouth face_vomiting nauseated_face sneezing_face mask thermometer_face head_bandage smiling_imp imp japanese_ogre japanese_goblin poop ghost skull skull_crossbones alien space_invader robot jack_o_lantern clown smiley_cat smile_cat joy_cat heart_eyes_cat smirk_cat kissing_cat scream_cat crying_cat_face pouting_cat open_hands raised_hands palms_up_together clap pray handshake thumbsup thumbsdown punch fist left_facing_fist right_facing_fist fingers_crossed v metal love_you_gesture ok_hand point_left point_right point_up_2 point_down point_up raised_hand raised_back_of_hand hand_splayed vulcan wave call_me muscle middle_finger writing_hand selfie nail_care ring lipstick kiss lips tongue ear nose footprints eye eyes speaking_head bust_in_silhouette busts_in_silhouette baby boy girl man woman blond-haired_woman blond_haired_man older_man older_woman man_with_chinese_cap woman_wearing_turban man_wearing_turban woman_police_officer police_officer woman_construction_worker construction_worker woman_guard guard woman_detective detective woman_health_worker man_health_worker woman_farmer man_farmer woman_cook man_cook woman_student man_student woman_singer man_singer woman_teacher man_teacher woman_factory_worker man_factory_worker woman_technologist man_technologist woman_office_worker man_office_worker woman_mechanic man_mechanic woman_scientist man_scientist woman_artist man_artist woman_firefighter man_firefighter woman_pilot man_pilot woman_astronaut man_astronaut woman_judge man_judge mrs_claus santa princess prince bride_with_veil man_in_tuxedo angel pregnant_woman breast_feeding woman_bowing man_bowing woman_tipping_hand man_tipping_hand woman_gesturing_no man_gesturing_no woman_gesturing_ok man_gesturing_ok woman_raising_hand man_raising_hand woman_facepalming man_facepalming woman_shrugging man_shrugging woman_pouting man_pouting woman_frowning man_frowning woman_getting_haircut man_getting_haircut woman_getting_face_massage man_getting_face_massage man_in_business_suit_levitating dancer man_dancing women_with_bunny_ears_partying men_with_bunny_ears_partying woman_walking man_walking woman_running man_running couple two_women_holding_hands two_men_holding_hands couple_with_heart couple_ww couple_mm couplekiss kiss_ww kiss_mm family family_mwg family_mwgb family_mwbb family_mwgg family_wwb family_wwg family_wwgb family_wwbb family_wwgg family_mmb family_mmg family_mmgb family_mmbb family_mmgg family_woman_boy family_woman_girl family_woman_girl_boy family_woman_boy_boy family_woman_girl_girl family_man_boy family_man_girl family_man_girl_boy family_man_boy_boy family_man_girl_girl bearded_person woman_with_headscarf woman_mage man_mage woman_fairy man_fairy woman_vampire man_vampire mermaid merman woman_elf man_elf woman_genie man_genie woman_zombie man_zombie womans_clothes shirt"}}:{recent:{icon:"clock3",title:"Recent",emoji:""},Land_uses:{title:"Land uses",emoji:"santa runner surfer swimmer lifter ear nose point_up_2 point_down point_left point_right punch wave ok_hand thumbsup thumbsdown clap open_hands boy girl man woman cop bride_with_veil person_with_blond_hair man_with_gua_pi_mao man_with_turban older_man grandma baby construction_worker princess angel information_desk_person guardsman dancer nail_care massage haircut muscle spy hand_splayed middle_finger vulcan no_good ok_woman bow raising_hand raised_hands person_frowning person_with_pouting_face pray rowboat bicyclist mountain_bicyclist walking bath metal point_up basketball_player fist raised_hand v writing_hand"},Land_rights:{icon:"earth_africa",title:"Land rights",emoji:"grinning grimacing grin joy smiley smile sweat_smile laughing innocent wink blush slight_smile upside_down relaxed yum relieved heart_eyes kissing_heart kissing kissing_smiling_eyes kissing_closed_eyes stuck_out_tongue_winking_eye stuck_out_tongue_closed_eyes stuck_out_tongue money_mouth nerd sunglasses hugging smirk no_mouth neutral_face expressionless unamused rolling_eyes thinking flushed disappointed worried angry rage pensive confused slight_frown frowning2 persevere confounded tired_face weary triumph open_mouth scream fearful cold_sweat hushed frowning anguished cry disappointed_relieved sleepy sweat sob dizzy_face astonished zipper_mouth mask thermometer_face head_bandage sleeping zzz poop smiling_imp imp japanese_ogre japanese_goblin skull ghost alien robot smiley_cat smile_cat joy_cat heart_eyes_cat smirk_cat kissing_cat scream_cat crying_cat_face pouting_cat raised_hands clap wave thumbsup thumbsdown punch fist v ok_hand raised_hand open_hands muscle pray point_up point_up_2 point_down point_left point_right middle_finger hand_splayed metal vulcan writing_hand nail_care lips tongue ear nose eye eyes bust_in_silhouette busts_in_silhouette speaking_head baby boy girl man woman person_with_blond_hair older_man older_woman man_with_gua_pi_mao man_with_turban cop construction_worker guardsman spy santa angel princess bride_with_veil walking runner dancer dancers couple two_men_holding_hands two_women_holding_hands bow information_desk_person no_good ok_woman raising_hand person_with_pouting_face person_frowning haircut massage couple_with_heart couple_ww couple_mm couplekiss kiss_ww kiss_mm family family_mwg family_mwgb family_mwbb family_mwgg family_wwb family_wwg family_wwgb family_wwbb family_wwgg family_mmb family_mmg family_mmgb family_mmbb family_mmgg womans_clothes shirt jeans necktie dress bikini kimono lipstick kiss footprints high_heel sandal boot mans_shoe athletic_shoe womans_hat tophat helmet_with_cross mortar_board crown school_satchel pouch purse handbag briefcase eyeglasses dark_sunglasses ring closed_umbrella"},Land_restrictions:{icon:"hamster",title:"Land restrictions",emoji:"dog cat mouse hamster rabbit bear panda_face koala tiger lion_face cow pig pig_nose frog octopus monkey_face see_no_evil hear_no_evil speak_no_evil monkey chicken penguin bird baby_chick hatching_chick hatched_chick wolf boar horse unicorn bee bug snail beetle ant spider scorpion crab snake turtle tropical_fish fish blowfish dolphin whale whale2 crocodile leopard tiger2 water_buffalo ox cow2 dromedary_camel camel elephant goat ram sheep racehorse pig2 rat mouse2 rooster turkey dove dog2 poodle cat2 rabbit2 chipmunk feet dragon dragon_face cactus christmas_tree evergreen_tree deciduous_tree palm_tree seedling herb shamrock four_leaf_clover bamboo tanabata_tree leaves fallen_leaf maple_leaf ear_of_rice hibiscus sunflower rose tulip blossom cherry_blossom bouquet mushroom chestnut jack_o_lantern shell spider_web earth_africa full_moon waning_gibbous_moon last_quarter_moon waning_crescent_moon new_moon waxing_crescent_moon first_quarter_moon waxing_gibbous_moon new_moon_with_face full_moon_with_face first_quarter_moon_with_face last_quarter_moon_with_face sun_with_face crescent_moon star star2 dizzy sparkles comet sunny white_sun_small_cloud partly_sunny white_sun_cloud white_sun_rain_cloud cloud cloud_rain thunder_cloud_rain cloud_lightning zap fire boom snowflake cloud_snow snowman2 snowman wind_blowing_face dash cloud_tornado fog umbrella2 umbrella droplet sweat_drops ocean"},Land_responsibilities:{icon:"pizza",title:"Land responsibilities",emoji:"green_apple apple pear tangerine lemon banana watermelon grapes strawberry melon cherries peach pineapple tomato eggplant hot_pepper corn sweet_potato honey_pot bread cheese poultry_leg meat_on_bone fried_shrimp egg hamburger fries hotdog pizza spaghetti taco burrito ramen stew fish_cake sushi bento curry rice_ball rice rice_cracker oden dango shaved_ice ice_cream icecream cake birthday custard candy lollipop chocolate_bar popcorn doughnut cookie beer beers wine_glass cocktail tropical_drink champagne sake tea coffee baby_bottle fork_and_knife fork_knife_plate"}},a}function T(a){var n=C();if(a&&a.filters){var t=n.filters;e.each(a.filters,function(a,n){v(n)&&!e.isEmptyObject(n)?e.each(n,function(e,n){t[a][e]=n}):delete t[a]}),a.filters=t}return e.extend({},n,a)}function x(e,a){return e.replace(l,function(e){var n=i[0===d?"jsecapeMap":"jsEscapeMap"];return void 0!==e&&e in n?f(a,n[e],i.toShort(e)):e})}function A(e,a){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/`/g,"&#x60;").replace(/(?:\r\n|\r|\n)/g,"\n").replace(/(\n+)/g,"<div>$1</div>").replace(/\n/g,"<br/>").replace(/<br\/><\/div>/g,"</div>"),a.shortnames&&(e=i.shortnameToUnicode(e)),x(e,a.emojiTemplate).replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/  /g,"&nbsp;&nbsp;")}function z(e,a){switch(e=e.replace(/&#10;/g,"\n").replace(/&#09;/g,"\t").replace(/<img[^>]*alt="([^"]+)"[^>]*>/gi,"$1").replace(/\n|\r/g,"").replace(/<br[^>]*>/gi,"\n").replace(/(?:<(?:div|p|ol|ul|li|pre|code|object)[^>]*>)+/gi,"<div>").replace(/(?:<\/(?:div|p|ol|ul|li|pre|code|object)>)+/gi,"</div>").replace(/\n<div><\/div>/gi,"\n").replace(/<div><\/div>\n/gi,"\n").replace(/(?:<div>)+<\/div>/gi,"\n").replace(/([^\n])<\/div><div>/gi,"$1\n").replace(/(?:<\/div>)+/gi,"</div>").replace(/([^\n])<\/div>([^\n])/gi,"$1\n$2").replace(/<\/div>/gi,"").replace(/([^\n])<div>/gi,"$1\n").replace(/\n<div>/gi,"\n").replace(/<div>\n/gi,"\n\n").replace(/<(?:[^>]+)?>/g,"").replace(new RegExp(p,"g"),"").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x60;/g,"`").replace(/&#60;/g,"<").replace(/&#62;/g,">").replace(/&amp;/g,"&"),a.saveEmojisAs){case"image":e=x(e,a.emojiTemplate);break;case"shortname":e=i.toShort(e)}return e}function E(){var e=this.editor[0].offsetWidth-this.editor[0].clientWidth,a=parseInt(this.button.css("marginRight"));a!==e&&(this.button.css({marginRight:e}),this.floatingPicker&&this.picker.css({right:parseInt(this.picker.css("right"))-a+e}))}function S(){if(!this.sprite&&this.lasyEmoji[0]&&this.lasyEmoji.eq(0).is(".lazy-emoji")){var a=this.picker.offset().top,n=a+this.picker.height()+20;this.lasyEmoji.each(function(){var t=e(this),i=t.offset().top;if(i>a&&i<n&&t.attr("src",t.data("src")).removeClass("lazy-emoji"),i>n)return!1}),this.lasyEmoji=this.lasyEmoji.filter(".lazy-emoji")}}function P(e,a){return(a?"":".")+u+(e?"-"+e:"")}function R(a){var n=e("<div/>",v(a)?a:{class:P(a,!0)});return e.each(_.call(arguments).slice(1),function(a,t){e.isFunction(t)&&(t=t.call(n)),t&&e(t).appendTo(n)}),n}function q(){return localStorage.getItem("recent_emojis")||""}function L(a,n){var t=q();if(!a.recent||a.recent!==t||n){if(t.length){var i,o,r=a.scrollArea.is(".skinnable");r||(i=a.scrollArea.scrollTop(),n&&a.recentCategory.show(),o=a.recentCategory.is(":visible")?a.recentCategory.height():0);var s=w(t,a.emojiBtnTemplate,!0).split("|").join("");if(a.recentCategory.children(".emojibtn").remove(),e(s).insertAfter(a.recentCategory.children(".emojionearea-category-title")),a.recentCategory.children(".emojibtn").on("click",function(){a.trigger("emojibtn.click",e(this)),console.log("kkkkkkkkk")}),a.recentFilter.show(),!r){a.recentCategory.show();var c=a.recentCategory.height();o!==c&&a.scrollArea.scrollTop(i+c-o)}}else a.recentFilter.hasClass("active")&&a.recentFilter.removeClass("active").next().addClass("active"),a.recentCategory.hide(),a.recentFilter.hide();a.recent=t}}function B(a,n,t){a.options=t=T(t),a.sprite=t.sprite&&d<3,a.inline=null===t.inline?n.is("INPUT"):t.inline,a.shortnames=t.shortnames,a.saveEmojisAs=t.saveEmojisAs,a.standalone=t.standalone,a.emojiTemplate='<img alt="{alt}" class="emojione'+(a.sprite?'-{uni}" src="'+m+'"/>':'emoji" src="{img}"/>'),a.emojiTemplateAlt=a.sprite?'<i class="emojione-{uni}"/>':'<img class="emojioneemoji" src="{img}"/>',a.emojiBtnTemplate='<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}">'+a.emojiTemplateAlt+"</i>",a.recentEmojis=t.recentEmojis&&function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}}();var o=t.pickerPosition;a.floatingPicker="top"===o||"bottom"===o,a.source=n,(n.is(":disabled")||n.is(".disabled"))&&a.disable();var r,l,_,f,y,k,j,C,x,B,F=n.is("TEXTAREA")||n.is("INPUT")?"val":"text",D=R("tones",t.tones?function(){this.addClass(P("tones-"+t.tonesStyle,!0));for(var a=0;a<=5;a++)this.append(e("<i/>",{class:"btn-tone btn-tone-"+a+(a?"":" active"),"data-skin":a,role:"button"}))}:null),I=R({class:u+(a.standalone?" "+u+"-standalone ":" ")+(n.attr("class")||""),role:"application"},r=a.editor=R("editor").attr({contenteditable:!a.standalone,placeholder:t.placeholder||n.data("placeholder")||n.attr("placeholder")||"",tabindex:0}),l=a.button=R("button",R("button-open"),R("button-close")).attr("title",t.buttonTitle),_=a.picker=R("picker",R("wrapper",f=R("filters"),t.search?k=R("search-panel",R("search",t.search?function(){a.search=e("<input/>",{placeholder:t.searchPlaceholder||"",type:"text",class:"search"}),this.append(a.search)}:null),D):null,B=R("scroll-area",t.tones&&!t.search?R("tones-panel",D):null,j=R("emojis-list")))).addClass(P("picker-position-"+t.pickerPosition,!0)).addClass(P("filters-position-"+t.filtersPosition,!0)).addClass(P("search-position-"+t.searchPosition,!0)).addClass("hidden"));t.search&&k.addClass(P("with-search",!0)),a.searchSel=null,r.data(n.data()),e.each(t.attributes,function(e,a){r.attr(e,a)});var O=R("category-block").attr({"data-tone":0}).prependTo(j);if(e.each(t.filters,function(n,i){var o=0;if("recent"!==n||a.recentEmojis){if("tones"!==n)e("<i/>",{class:P("filter",!0)+" "+P("filter-"+n,!0),"data-filter":n,title:i.title}).wrapInner(w(i.icon,a.emojiTemplateAlt)).appendTo(f);else{if(!t.tones)return;o=5}do{var r,s=i.emoji.replace(/[\s,;]+/g,"|");r=0===o?R("category").attr({name:n,"data-tone":o}).appendTo(O):R("category-block").attr({name:n,"data-tone":o}).appendTo(j),o>0&&(r.hide(),s=s.split("|").join("_tone"+o+"|")+"_tone"+o),"recent"===n&&(s=q()),s=w(s,a.sprite?'<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}"><i class="emojione-{uni}"></i></i>':'<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}"><img class="emojioneemoji lazy-emoji" data-src="{img}"/></i>',!0).split("|").join(""),r.html(s),e('<div class="emojionearea-category-title"/>').text(i.title).prependTo(r)}while(--o>0)}}),t.filters=null,a.sprite||(a.lasyEmoji=j.find(".lazy-emoji")),(y=f.find(P("filter"))).eq(0).addClass("active"),x=j.find(P("category-block")),C=j.find(P("category")),a.recentFilter=y.filter('[data-filter="recent"]'),a.recentCategory=C.filter("[name=recent]"),a.scrollArea=B,t.container?e(t.container).wrapInner(I):I.insertAfter(n),t.hideSource&&n.hide(),a.setText(n[F]()),n[F](a.getText()),E.apply(a),a.standalone&&!a.getText().length){var N=e(n).data("emoji-placeholder")||t.emojiPlaceholder;a.setText(N),r.addClass("has-placeholder")}g(a,j.find(".emojibtn"),{click:"emojibtn.click"}),g(a,window,{resize:"!resize"}),g(a,D.children(),{click:"tone.click"}),g(a,[_,l],{mousedown:"!mousedown"},r),g(a,l,{click:"button.click"}),g(a,r,{paste:"!paste"},r),g(a,r,["focus","blur"],function(){return!a.stayFocused&&r}),g(a,_,{mousedown:"picker.mousedown",mouseup:"picker.mouseup",click:"picker.click",keyup:"picker.keyup",keydown:"picker.keydown",keypress:"picker.keypress"}),g(a,r,["mousedown","mouseup","click","keyup","keydown","keypress"]),g(a,_.find(".emojionearea-filter"),{click:"filter.click"}),g(a,n,{change:"source.change"}),t.search&&g(a,a.search,{keyup:"search.keypress",focus:"search.focus",blur:"search.blur"});var U=!1;if(B.on("scroll",function(){if(!U&&(S.call(a),B.is(":not(.skinnable)"))){var n=C.eq(0),t=B.offset().top;C.each(function(a,i){if(e(i).offset().top-t>=10)return!1;n=e(i)});var i=y.filter('[data-filter="'+n.attr("name")+'"]');i[0]&&!i.is(".active")&&(y.removeClass("active"),i.addClass("active"))}}),a.on("@filter.click",function(e){var n=e.is(".active");if(B.is(".skinnable")){if(n)return;D.children().eq(0).click()}U=!0,n||(y.filter(".active").removeClass("active"),e.addClass("active"));var t=C.filter('[name="'+e.data("filter")+'"]').offset().top,i=B.scrollTop(),o=B.offset().top;B.stop().animate({scrollTop:t+i-o-2},200,"swing",function(){S.call(a),U=!1})}).on("@picker.show",function(){a.recentEmojis&&L(a),S.call(a)}).on("@tone.click",function(e){D.children().removeClass("active");var n=e.addClass("active").data("skin");n?(B.addClass("skinnable"),x.hide().filter("[data-tone="+n+"]").show(),y.removeClass("active")):(B.removeClass("skinnable"),x.hide().filter("[data-tone=0]").show(),y.eq(0).click()),S.call(a),t.search&&a.trigger("search.keypress")}).on("@button.click",function(n){n.is(".active")?(a.hidePicker(),console.log("emoji clicked hide")):(a.showPicker(),a.searchSel=null,console.log("emoji clicked show"),0==alreadyMovedUp&&moveMaptoTop(),e("item").keydown(),e("item").blur())}).on("@!paste",function(n,t){var i=function(t){var i="caret-"+(new Date).getTime(),o=A(t,a);b(o),b('<i id="'+i+'"></i>'),n.scrollTop(l);var r=e("#"+i),s=r.offset().top-n.offset().top,c=n.height();(l+s>=c||l>s)&&n.scrollTop(l+s-2*c/3),r.remove(),a.stayFocused=!1,E.apply(a),h(a,"paste",[n,t,o])};if(t.originalEvent.clipboardData){var o=t.originalEvent.clipboardData.getData("text/plain");return i(o),t.preventDefault?t.preventDefault():t.stop(),t.returnValue=!1,t.stopPropagation(),!1}a.stayFocused=!0,b("<span>"+p+"</span>");var r=s(n[0]),l=n.scrollTop(),m=e("<div/>",{contenteditable:!0}).css({position:"fixed",left:"-999px",width:"1px",height:"1px",top:"20px",overflow:"hidden"}).appendTo(e("BODY")).focus();window.setTimeout(function(){n.focus(),c(n[0],r);var e=z(m.html().replace(/\r\n|\n|\r/g,"<br>"),a);m.remove(),i(e)},200)}).on("@emojibtn.click",function(e){r.removeClass("has-placeholder"),null!==a.searchSel&&(r.focus(),c(r[0],a.searchSel),a.searchSel=null),a.standalone?(r.html(w(e.data("name"),a.emojiTemplate)),a.trigger("blur")):(s(r[0]),b(w(e.data("name"),a.emojiTemplate))),a.recentEmojis&&function(e,a){var n=q().split("|"),t=n.indexOf(a);-1!==t&&n.splice(t,1),n.unshift(a),n.length>9&&n.pop(),localStorage.setItem("recent_emojis",n.join("|")),L(e)}(a,e.data("name")),a.trigger("search.keypress")}).on("@!resize @keyup @emojibtn.click",E).on("@!mousedown",function(n,t){return e(t.target).hasClass("search")?(a.stayFocused=!0,null===a.searchSel&&(a.searchSel=s(n[0]))):(I.is(".focused")||n.trigger("focus"),t.preventDefault()),!1}).on("@change",function(){var e=a.editor.html().replace(/<\/?(?:div|span|p)[^>]*>/gi,"");e.length&&!/^<br[^>]*>$/i.test(e)||a.editor.html(a.content=""),n[F](a.getText())}).on("@source.change",function(){a.setText(n[F]()),h("change")}).on("@focus",function(){I.addClass("focused")}).on("@blur",function(){I.removeClass("focused"),t.hidePickerOnBlur&&a.hidePicker();var e=a.editor.html();a.content!==e?(a.content=e,h(a,"change",[a.editor]),n.trigger("blur").trigger("change")):n.trigger("blur"),t.search&&(a.search.val(""),a.trigger("search.keypress",!0))}),t.search&&a.on("@search.focus",function(){a.stayFocused=!0,a.search.addClass("focused")}).on("@search.keypress",function(n){var i=_.find(".emojionearea-filter"),o=t.tones?D.find("i.active").data("skin"):0,r=a.search.val().replace(/ /g,"_").replace(/"/g,'\\"');r&&r.length?(a.recentFilter.hasClass("active")&&a.recentFilter.removeClass("active").next().addClass("active"),a.recentCategory.hide(),a.recentFilter.hide(),x.each(function(){var a=function(e,a){var n=e.find('.emojibtn[data-name*="'+r+'"]');0===n.length?(e.data("tone")===a&&e.hide(),i.filter('[data-filter="'+e.attr("name")+'"]').hide()):(e.find('.emojibtn:not([data-name*="'+r+'"])').hide(),n.show(),e.data("tone")===a&&e.show(),i.filter('[data-filter="'+e.attr("name")+'"]').show())},n=e(this);0===n.data("tone")?C.filter(':not([name="recent"])').each(function(){a(e(this),0)}):a(n,o)}),U?S.call(a):B.trigger("scroll")):(L(a,!0),x.filter('[data-tone="'+D.find("i.active").data("skin")+'"]:not([name="recent"])').show(),e(".emojibtn",x).show(),i.show(),S.call(a))}).on("@search.blur",function(){a.stayFocused=!1,a.search.removeClass("focused"),a.trigger("blur")}),t.shortcuts&&a.on("@keydown",function(e,n){n.ctrlKey||(9==n.which?(n.preventDefault(),l.click()):27==n.which&&(n.preventDefault(),l.is(".active")&&a.hidePicker()))}),v(t.events)&&!e.isEmptyObject(t.events)&&e.each(t.events,function(e,n){a.on(e.replace(/_/g,"."),n)}),t.autocomplete){var $=function(){var n={maxCount:t.textcomplete.maxCount,placement:t.textcomplete.placement};t.shortcuts&&(n.onKeydown=function(e,a){if(!e.ctrlKey&&13==e.which)return a.KEY_ENTER});var o=e.map(i.emojioneList,function(e,a){return t.autocompleteTones?a:/_tone[12345]/.test(a)?null:a});o.sort(),r.textcomplete([{id:u,match:/\B(:[\-+\w]*)$/,search:function(a,n){n(e.map(o,function(e){return 0===e.indexOf(a)?e:null}))},template:function(e){return w(e,a.emojiTemplate)+" "+e.replace(/:/g,"")},replace:function(e){return w(e,a.emojiTemplate)},cache:!0,index:1}],n),t.textcomplete.placement&&"static"==e(r.data("textComplete").option.appendTo).css("position")&&e(r.data("textComplete").option.appendTo).css("position","relative")},M=function(){if(a.disabled){var e=function(){a.off("enabled",e),$()};a.on("enabled",e)}else $()};e.fn.textcomplete?M():e.ajax({url:"https://cdn.rawgit.com/yuku-t/jquery-textcomplete/v1.3.4/dist/jquery.textcomplete.js",dataType:"script",cache:!0,success:M})}a.inline&&(I.addClass(P("inline",!0)),a.on("@keydown",function(e,a){13==a.which&&a.preventDefault()})),/firefox/i.test(navigator.userAgent)&&document.execCommand("enableObjectResizing",!1,!1),a.isReady=!0,a.trigger("onLoad",r),a.trigger("ready",r)}window.getSelection&&document.createRange?(s=function(e){var a=window.getSelection&&window.getSelection();if(a&&a.rangeCount>0)return a.getRangeAt(0)},c=function(e,a){var n=document.createRange();n.setStart(a.startContainer,a.startOffset),n.setEnd(a.endContainer,a.endOffset),(a=window.getSelection()).removeAllRanges(),a.addRange(n)}):document.selection&&document.body.createTextRange&&(s=function(e){return document.selection.createRange()},c=function(e,a){var n=document.body.createTextRange();n.moveToElementText(e),n.setStart(a.startContanier,a.startOffset),n.setEnd(a.endContainer,a.endOffset),n.select()});var F={defaultBase:"https://cdnjs.cloudflare.com/ajax/libs/emojione/",defaultBase3:"https://cdn.jsdelivr.net/",base:null,isLoading:!1};function D(a){var n,t=y();(a=T(a),F.isLoading)||(!i||j(k(i))<2?(F.isLoading=!0,n=j(t)>5?F.defaultBase3+"npm/emojione@"+t:j(t)>4?F.defaultBase3+"emojione/"+t:F.defaultBase+"/"+t,e.ajax({url:n+"/lib/js/emojione.min.js",dataType:"script",cache:!0,success:function(){var n;for(i=window.emojione,t=k(i),(d=j(t))>4?(F.base=F.defaultBase3+"emojione/assets/"+t,n=F.base+"/sprites/emojione-sprite-"+i.emojiSize+".css"):(F.base=F.defaultBase+t+"/assets",n=F.base+"/sprites/emojione.sprites.css"),a.sprite&&(document.createStyleSheet?document.createStyleSheet(n):e("<link/>",{rel:"stylesheet",href:n}).appendTo("head"));o.length;)o.shift().call();F.isLoading=!1}})):(t=k(i),d=j(t),F.base=d>4?F.defaultBase3+"emojione/assets/"+t:F.defaultBase+t+"/assets"));r(function(){var e="";a.useInternalCDN&&(d>4&&(e=i.emojiSize+"/"),i.imagePathPNG=F.base+"/png/"+e,i.imagePathSVG=F.base+"/svg/"+e,i.imagePathSVGSprites=F.base+"/sprites/emojione.sprites.svg",i.imageType=a.imageType),j(t)>4?(l=i.regUnicode,i.imageType=a.imageType||"png"):l=new RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|("+i.unicodeRegexp+")","gi")})}var I=function(e,i){var o=this;D(i),n[o.id=++a]={},t[o.id]={},r(function(){B(o,e,i)})};I.prototype.on=function(a,i){if(a&&e.isFunction(i)){var o=this;e.each(a.toLowerCase().split(" "),function(a,r){!function(a,n){n=n.replace(/^@/,"");var i=a.id;t[i][n]&&(e.each(t[i][n],function(t,i){e.each(e.isArray(i[0])?i[0]:[i[0]],function(t,o){e(o).on(i[1],function(){var t=_.call(arguments),o=e.isFunction(i[2])?i[2].apply(a,[n].concat(t)):i[2];o&&h(a,n,[o].concat(t))})})}),t[i][n]=null)}(o,r),(n[o.id][r]||(n[o.id][r]=[])).push(i)})}return this},I.prototype.off=function(a,t){if(a){var i=this.id;e.each(a.toLowerCase().replace(/_/g,".").split(" "),function(a,o){n[i][o]&&!/^@/.test(o)&&(t?e.each(n[i][o],function(e,a){a===t&&n[i][o].splice(e,1)}):n[i][o]=[])})}return this},I.prototype.trigger=function(){var e=_.call(arguments),a=[this].concat(e.slice(0,1));return a.push(e.slice(1)),h.apply(this,a)},I.prototype.setFocus=function(){var e=this;return r(function(){e.editor.focus()}),e},I.prototype.setText=function(e){var a=this;return r(function(){a.editor.html(A(e,a)),a.content=a.editor.html(),h(a,"change",[a.editor]),E.apply(a)}),a},I.prototype.getText=function(){return z(this.editor.html(),this)},I.prototype.showPicker=function(){var e=this;return e._sh_timer&&window.clearTimeout(e._sh_timer),e.picker.removeClass("hidden"),e._sh_timer=window.setTimeout(function(){e.button.addClass("active")},50),h(e,"picker.show",[e.picker]),e},I.prototype.hidePicker=function(){var e=this;return e._sh_timer&&window.clearTimeout(e._sh_timer),e.button.removeClass("active"),e._sh_timer=window.setTimeout(function(){e.picker.addClass("hidden")},500),h(e,"picker.hide",[e.picker]),e},I.prototype.enable=function(){var e=this,a=function(){e.disabled=!1,e.editor.prop("contenteditable",!0),e.button.show();var a=e[e.standalone?"button":"editor"];a.parent().removeClass("emojionearea-disable"),h(e,"enabled",[a])};return e.isReady?a():e.on("ready",a),e},I.prototype.disable=function(){var e=this;e.disabled=!0;var a=function(){e.editor.prop("contenteditable",!1),e.hidePicker(),e.button.hide();var a=e[e.standalone?"button":"editor"];a.parent().addClass("emojionearea-disable"),h(e,"disabled",[a])};return e.isReady?a():e.on("ready",a),e},e.fn.emojioneArea=function(a){return this.each(function(){return this.emojioneArea?this.emojioneArea:(e.data(this,"emojioneArea",this.emojioneArea=new I(e(this),a)),this.emojioneArea)})},e.fn.emojioneArea.defaults=C(),e.fn.emojioneAreaText=function(a){a=T(a);var n=this,t={shortnames:!a||void 0===a.shortnames||a.shortnames,emojiTemplate:'<img alt="{alt}" class="emojione'+(a&&a.sprite&&d<3?'-{uni}" src="'+m:'emoji" src="{img}')+'"/>'};return D(a),r(function(){n.each(function(){var a=e(this);return a.hasClass("emojionearea-text")||a.addClass("emojionearea-text").html(A(a.is("TEXTAREA")||a.is("INPUT")?a.val():a.text(),t)),a})}),this}},window);
